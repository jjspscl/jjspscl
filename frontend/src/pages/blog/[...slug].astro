---
import { useStoryblokApi } from "@storyblok/astro";
import StoryblokComponent from "@storyblok/astro/StoryblokComponent.astro";
import BaseLayout from '@layouts/base.astro'

const { slug } = Astro.params;

let storyBlokSlug = !slug ? 'index' : slug;
const storyblokApi = useStoryblokApi();

const { data: content } = await storyblokApi.get(
    'cdn/stories/' + storyBlokSlug,
    {
        version: 'draft'
    }
)
---

<BaseLayout>
  <StoryblokComponent blok={content} />
</BaseLayout>